"use strict";function compareObjects(t,n){if(null==t||void 0==t)return!1;if(null==n||void 0==n)return!1;var e,i=Object.keys(t).sort(),o=Object.keys(n).sort();if(i.length!==o.length)return!1;if(i.join("")!==o.join(""))return!1;for(e=0;e<i.length;++e)if(t[i[e]]instanceof Array){if(!(n[i[e]]instanceof Array))return!1;if(n[i[e]].sort().join("")!==t[i[e]].sort().join(""))return!1}else if(t[i[e]]instanceof Date){if(!(n[i[e]]instanceof Date))return!1;if(""+t[i[e]]!=""+n[i[e]])return!1}else if(t[i[e]]instanceof Function){if(!(n[i[e]]instanceof Function))return!1}else if(t[i[e]]instanceof Object){if(!(n[i[e]]instanceof Object))return!1;if(t[i[e]]===t){if(n[i[e]]!==n)return!1}else if(compareObjects(t[i[e]],n[i[e]])===!1)return!1}else if(t[i[e]]!==n[i[e]])return!1;return!0}define(["angular","app","config.lazyload","config.router"],function(t,n){n.controller("DialogBaseController",["$scope","$translate","dialogs",function(t,n,e){t._changeConfirmDialog=function(){return e.confirm(n.instant("DIALOGS_CONFIRMATION"),n.instant("DIALOGS_CONFIRMATION_CHANGE"))},t._deleteConfirmDialog=function(){return e.confirm(n.instant("DIALOGS_CONFIRMATION"),n.instant("DIALOGS_CONFIRMATION_DELETE"))},t._saveConfirmDialog=function(){return e.confirm(n.instant("DIALOGS_CONFIRMATION"),n.instant("DIALOGS_CONFIRMATION_SAVE"))},t._doneConfirmDialog=function(){return e.confirm(n.instant("DIALOGS_CONFIRMATION"),n.instant("DIALOGS_CONFIRMATION_DONE"))},t._cancelConfirmDialog=function(){return e.confirm(n.instant("DIALOGS_CONFIRMATION"),n.instant("DIALOGS_CONFIRMATION_CANCEL"))},t._rejectConfirmDialog=function(){return e.confirm(n.instant("DIALOGS_CONFIRMATION"),n.instant("DIALOGS_CONFIRMATION_REJECT"))}}]),n.controller("BaseController",["$rootScope","$scope","$http","$location","$modal","$log","$controller","$timeout",function(n,e,i,o,a,r,u,l){u("DialogBaseController",{$scope:e}),e.mode="list",e.originData="",e.modifiedData="",e.routeUrl=null,e.basicService=null,e.$on("unauthenticated",function(){o.path("/access/401")}),e.dateOptions={formatYear:"yy",startingDay:1},e.setForm=function(t){e.myForm=t},e.listData=function(t){null==t?(e._preListData(e.myForm),e._mainListData(e.myForm),e._postListData(e.myForm)):(e._preListData(t),e._mainListData(t),e._postListData(t))},e._preListData=function(){},e._mainListData=function(t){e.disabledEventPropagation(window.event),null==t?e.doList(null):e.isUnchanged()?(e.mode="list",t.$setPristine(!0),e.doList(null,!1).then(function(){e._toListPage()})):e._changeConfirmDialog().result.then(function(){},function(){e.mode="list",t.$setPristine(!0),e.doList(null,!1).then(function(){e._toListPage()})})},e._toListPage=function(){null!=e.routeUrl&&null!=e.routeUrl.list&&l(function(){o.path(e.routeUrl.list),e.$apply()},200)},e._postListData=function(){},e.createData=function(){e._preCreateData(),e._mainCreateData(),e._postCreateData(),e.originData=t.copy(e.modifiedData),null!=e.routeUrl&&null!=e.routeUrl.detail&&l(function(){o.path(e.routeUrl.detail)})},e._preCreateData=function(){},e._mainCreateData=function(){e.disabledEventPropagation(window.event),e.mode="create",e.originData={},e.modifiedData={}},e._postCreateData=function(){},e.modifyData=function(n){e._preModifyData(n),e._mainModifyData(n),e._postModifyData(n),e.originData=t.copy(e.modifiedData),null!=e.routeUrl&&null!=e.routeUrl.detail&&o.path(e.routeUrl.detail)},e._preModifyData=function(){},e._mainModifyData=function(n){e.disabledEventPropagation(window.event),e.mode="modify",e.originData=t.copy(n),e.modifiedData=t.copy(n)},e._postModifyData=function(){},e.deleteData=function(n){e._preDeleteData(n),e._mainDeleteData(n),e._postDeleteData(n),e.originData=t.copy(e.modifiedData)},e._preDeleteData=function(){},e._mainDeleteData=function(t){e.disabledEventPropagation(window.event),e._deleteConfirmDialog().result.then(function(){e.doDelete(t).then(function(){e.doList(null,!0)})},function(){})},e._postDeleteData=function(){},e.saveData=function(t){null==t?(e._preSaveData(e.myForm),e._mainSaveData(e.myForm),e._postSaveData(e.myForm)):(e._preSaveData(t),e._mainSaveData(t),e._postSaveData(t))},e._preSaveData=function(){},e._mainSaveData=function(t){e.disabledEventPropagation(window.event),e._saveConfirmDialog().result.then(function(){"create"==e.mode?e.doCreate(e.modifiedData).then(function(){e.doList(null,!0)}):e.doModify(e.modifiedData).then(function(){e.doList(null,!0)}),t.$setPristine(!0)},function(){})},e._postSaveData=function(){},e.doList=function(t,n){return null==n&&(n=!1),null!=e.basicService?(t=e._preList(t),e.basicService.listData(n).then(function(t){e.$broadcast("reloadData"),e._postList(t)})):void(D&&r.info("doList is not implemented."))},e._preList=function(t){return t},e._postList=function(){},e.doCreate=function(n){return null!=e.basicService?(n=e._preCreate(n),e.basicService.createData(n).then(function(n){e.originData=t.copy(n),e.modifiedData=t.copy(n),e.mode="modify",e._postCreate(n)},function(){},function(){})):void(D&&r.info("doCreate is not implemented."))},e._preCreate=function(t){return t},e._postCreate=function(){},e.doModify=function(n){return null!=e.basicService?(n=e._preModify(n),e.basicService.updateData(n).then(function(n){e.originData=t.copy(n),e.modifiedData=t.copy(n),e._postModify(n)},function(){},function(){})):void(D&&r.info("doModify is not implemented."))},e._preModify=function(t){return t},e._postModify=function(){},e.doDelete=function(t){return null!=e.basicService?(t=e._preDelete(t),e.basicService.deleteData(t).then(function(t){e._postDelete(t)},function(){},function(){})):void(D&&r.info("doDelete is not implemented."))},e._preDelete=function(t){return t},e._postDelete=function(){},e.log=function(t){e.D&&r.log(t)},e.info=function(t){e.D&&r.info(t)},e.debug=function(t){e.D&&r.debug(t)},e.warn=function(t){e.D&&r.warn(t)},e.error=function(t){e.D&&r.error(t)},e.disabledEventPropagation=function(t){null!=t&&(t.stopPropagation?t.stopPropagation():window.event&&(window.event.cancelBubble=!0))},e.isUnchanged=function(){return null==e.modifiedData?!1:null==e.originData?!1:compareObjects(e.originData,e.modifiedData)},e.getTree=function(t,n,e){if(!t||0==t.length||!n||!e)return[];for(var i,o,a=[],r=[],u=t[0],l=u[n],f={},c={},s=t.length,d=0;s>d;)if(u=t[d++],l=u[n],c[l]&&(u.children=c[l],delete c[l]),f[l]=u,i=u[e])if(o=f[i])o.children?o.children.push(u):o.children=[u];else{var D=c[i];D?D.push(u):c[i]=[u]}else r.push(l);for(var d=0;d<r.length;d++)a.push(f[r[d]]);return a},e.getTree2=function(t,n,e){if(!t||0==t.length||!n||!e)return[];for(var i,o,a=[],r=[],u=t[0],l=u[n],f={},c={},s=t.length,d=0;s>d;)if(u=t[d++],items.nodes=[],l=u[n],c[l]&&(u.children=c[l],delete c[l]),f[l]=u,i=u[e])if(o=f[i])o.nodes?o.nodes.push(u):o.nodes=[u];else{var D=c[i];D?D.push(u):c[i]=[u]}else r.push(l);for(var d=0;d<r.length;d++)a.push(f[r[d]]);return a}}])});
